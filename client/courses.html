<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Code Devil - Courses</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="icon" href="favicon1.ico" type="image/x-icon" />
    <style>
        .course-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            background: #f9f9f9;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .course-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .course-card img {
            max-width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 5px;
            margin-bottom: 15px;
        }
        .course-title {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.4em;
        }
        .course-description {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        .chapter-count {
            background: #007acc;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9em;
            display: inline-block;
            margin-bottom: 10px;
        }
        .view-details-btn {
            background: #28a745;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            display: inline-block;
            transition: background 0.2s ease;
        }
        .view-details-btn:hover {
            background: #218838;
            text-decoration: none;
            color: white;
        }
        .loading {
            text-align: center;
            padding: 50px;
            color: #666;
        }
        .no-courses {
            text-align: center;
            padding: 50px;
            color: #999;
        }
        @media (max-width: 768px) {
            .course-card {
                margin: 10px 0;
                padding: 15px;
            }
            .course-card img {
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-content">
            <a href="index.html" class="logo">Code Devil</a>
            <div class="navbar-links" id="navbar-links">
                <a href="index.html">Home</a>
                <a href="courses.html">Courses</a>
                <a href="category.html">Categories</a>
                <a href="contact.html">Contact</a>
                <a href="admin.html">Admin</a>
            </div>
            <div class="hamburger" id="menu-icon">‚ò∞</div>
            <div class="close-icon" id="close-icon">‚úñÔ∏è</div>
        </div>
    </nav>

    <div class="container">
        <h1>Available Courses</h1>
        <div id="coursesList">
            <div class="loading">Loading courses...</div>
        </div>
    </div>

    <script src="js/courses.js"></script>

    <script>
    async function loadCourses() {
      try {
        const res = await fetch("/admin/api/courses");
        const courses = await res.json();

        const container = document.getElementById("coursesList");
        container.innerHTML = "";

        if (courses.length === 0) {
          container.innerHTML = '<div class="no-courses">No courses available at the moment.</div>';
          return;
        }

        courses.forEach(course => {
          const courseCard = document.createElement("div");
          courseCard.classList.add("course-card");
          
          const chapterCount = course.chapters ? course.chapters.length : 0;
          const totalModules = course.chapters ? 
            course.chapters.reduce((total, chapter) => total + (chapter.modules ? chapter.modules.length : 0), 0) : 0;

          courseCard.innerHTML = `
            ${course.thumbnail ? `<img src="${course.thumbnail}" alt="${course.title}" />` : ''}
            <h3 class="course-title">${course.title}</h3>
            <p class="course-description">${course.description || 'No description available.'}</p>
            <div class="chapter-count">
              üìö ${chapterCount} Chapter${chapterCount !== 1 ? 's' : ''} ‚Ä¢ 
              üéØ ${totalModules} Module${totalModules !== 1 ? 's' : ''}
            </div>
            <br>
            <a href="course-details.html?id=${course._id}" class="view-details-btn">View Details ‚Üí</a>
          `;
          
          container.appendChild(courseCard);
        });
      } catch (error) {
        console.error('Error loading courses:', error);
        document.getElementById("coursesList").innerHTML = 
          '<div class="no-courses">Error loading courses. Please try again later.</div>';
      }
    }
    
    loadCourses();
    </script>
</body>
</html>
